<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SAMS Auth</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/mobile.css') }}">
</head>
<body>
  <div class="auth-app">
    <div class="phone-shell">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div class="flash-wrap">
            {% for category, message in messages %}
              <div class="flash flash-{{ category }}">{{ message }}</div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}

      <section class="screen active" data-screen="welcome">
        <div class="hero-wrap">
          <h1>Welcome</h1>
          <p class="subtitle">Login or signup to continue</p>
          <div class="hero-illustration" aria-hidden="true"></div>
          <h2>SAMS</h2>
          <p class="muted">Smart Academic Management System</p>
        </div>
        <div class="actions">
          <button class="btn btn-primary" data-next="signup">Create Account</button>
          <button class="btn btn-outline" data-next="login">Already have an account</button>
          <button class="link-btn" data-next="login">Continue as guest</button>
        </div>
      </section>

      <section class="screen" data-screen="login">
        <button class="back" data-next="welcome" type="button">&larr;</button>
        <h1>Login Account</h1>
        <p class="subtitle" id="roleWelcome">Welcome back, Student!</p>

        <div class="role-switch" role="tablist" aria-label="Role selector">
          <button class="role-tab active" type="button" data-role="student">Student</button>
          <button class="role-tab" type="button" data-role="faculty">Faculty</button>
        </div>

        <form class="form-block" method="post" action="{{ url_for('auth.signin') }}">
          <input type="hidden" id="loginRole" name="role" value="student">

          <label id="loginIdLabel">Student Email / Roll Number</label>
          <input id="loginId" name="identifier" type="text" placeholder="Enter student email or roll no" required>

          <label>Password</label>
          <div class="input-row">
            <input id="loginPassword" name="password" type="password" placeholder="Enter password" required>
            <button type="button" class="eye" data-toggle="loginPassword">Show</button>
          </div>

          <div class="row-space">
            <label class="checkbox"><input type="checkbox"> Keep me logged in</label>
            <button class="text-link" data-next="forgot" type="button">Forgot Password?</button>
          </div>

          <button class="btn btn-primary" id="loginAction" type="submit">Login as Student</button>
          <button class="text-link center" data-next="signup" type="button">Don't have an account? Sign Up</button>
        </form>

        <div class="detail-card">
          <h3 id="detailTitle">Student quick details</h3>
          <p id="detailBody">Use your roll number from approved section range and you will get your section timetable automatically.</p>
        </div>
      </section>

      <section class="screen" data-screen="signup">
        <button class="back" data-next="welcome" type="button">&larr;</button>
        <h1>Create Account</h1>
        <p class="subtitle">Sign up to continue</p>

        <div class="role-switch" role="tablist" aria-label="Role selector">
          <button class="role-tab active" type="button" data-role="student">Student</button>
          <button class="role-tab" type="button" data-role="faculty">Faculty</button>
        </div>

        <form class="form-block" method="post" action="{{ url_for('auth.register') }}">
          <input type="hidden" id="signupRole" name="role" value="student">

          <label id="signupNameLabel">Student Name</label>
          <input id="signupName" name="name" type="text" placeholder="Enter full name" required>

          <label id="signupIdLabel">Student Email / Roll Number</label>
          <input id="signupId" name="identifier" type="text" placeholder="Enter student email or roll no" required>

          <label>Password</label>
          <div class="input-row">
            <input id="signupPassword" name="password" type="password" placeholder="Create password" required>
            <button type="button" class="eye" data-toggle="signupPassword">Show</button>
          </div>

          <label>Confirm Password</label>
          <div class="input-row">
            <input id="confirmPassword" name="confirm_password" type="password" placeholder="Re-enter password" required>
            <button type="button" class="eye" data-toggle="confirmPassword">Show</button>
          </div>

          <label class="checkbox"><input type="checkbox" checked required> I agree with privacy policy</label>

          <button class="btn btn-primary" id="signupAction" type="submit">Sign Up as Student</button>
          <button class="text-link center" data-next="login" type="button">Already have an account? Login</button>
        </form>
      </section>

      <section class="screen" data-screen="forgot">
        <button class="back" data-next="login" type="button">&larr;</button>
        <h1>Forgot Password?</h1>
        <p class="subtitle">No worries, we got you.</p>

        <div class="info-box">Password reset flow can be connected next with OTP/email.</div>

        <div class="form-block">
          <label id="forgotLabel">Student Email / Roll Number</label>
          <input id="forgotInput" type="text" placeholder="Enter student email or roll no">
          <button class="btn btn-primary" data-next="login" type="button">Back to Login</button>
        </div>
      </section>
    </div>
  </div>

  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
